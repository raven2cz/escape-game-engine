/* games/reactor/game.css
   Per-game CSS overrides for Reactor escape room
   Theme: Reactor world - lighter text, transparent blur tokens, yellowish buttons, blue accents
   Cascades: puzzles.css → game.css → puzzle.theme → token.style
*/

/* ========================================================================== */
/* FONT CONFIGURATION - Claps & Handelsonsix                                  */
/* ========================================================================== */

@font-face {
  font-family: 'Claps';
  src: url('assets/fonts/Calps.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0100-024F, U+1E00-1EFF; /* latin + latin-ext */
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Handelsonsix';
  src: url('assets/fonts/handelsonsix.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* Apply Claps font globally with system fallback */
html, body {
  font-family:
    'Claps',
    'Noto Color Emoji',      /* Linux/Android */
    'Segoe UI Emoji',        /* Windows */
    'Apple Color Emoji',     /* macOS/iOS */
    system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ========================================================================== */
/* TYPOGRAPHY HIERARCHY - Handelsonsix for titles                            */
/* ========================================================================== */

/* Title - larger size with Handelsonsix font */
.topbar .title {
  font-family: 'Handelsonsix', 'Claps', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
  font-size: 1.5em;
  font-weight: 700;
  letter-spacing: 0.8px;
}

/* Scene titles */
#sceneContainer .scene-title {
  font-family: 'Handelsonsix', 'Claps', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
  font-size: 1.3em;
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* Puzzle titles */
.pz-title {
  font-family: 'Handelsonsix', 'Claps', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
  font-size: 1.25em;
  font-weight: 600;
  letter-spacing: 0.4px;
}

/* Dialog titles */
.dlg-title {
  font-family: 'Handelsonsix', 'Claps', 'Noto Color Emoji', 'Segoe UI Emoji', 'Apple Color Emoji', monospace;
}

/* ========================================================================== */
/* REACTOR THEME - Lighter text, blue accents, transparent tokens           */
/* ========================================================================== */

/* Global lighter text color */
body {
  color: rgba(240, 245, 250, 0.95);
}

/* Topbar styling */
.topbar {
  background: rgba(10, 15, 25, 0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(100, 150, 200, 0.25);
}

.topbar .title {
  color: rgba(240, 245, 250, 0.98);
  text-shadow: 0 0 8px rgba(100, 180, 255, 0.3);
}

/* Scene titles with blue glow */
#sceneContainer .scene-title {
  color: rgba(240, 245, 250, 0.98);
  text-shadow: 0 0 10px rgba(100, 180, 255, 0.35),
               0 2px 4px rgba(0, 0, 0, 0.5);
  background: rgba(10, 15, 25, 0.75);
  backdrop-filter: blur(8px);
  padding: 0.75em 1.5em;
  border-radius: 8px;
  border: 1px solid rgba(100, 150, 200, 0.3);
}

/* Ensure scene container and images have no blur */
#sceneContainer {
  backdrop-filter: none !important;
}

#sceneContainer img,
.scene-image {
  backdrop-filter: none !important;
  filter: none !important;
}

/* ========================================================================== */
/* PUZZLE TOKENS - Transparent blur style                                    */
/* ========================================================================== */

/* Default token styling */
.pz-token {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(200, 220, 240, 0.25);
  color: rgba(240, 245, 250, 0.95);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  transition: all 0.25s ease;
}

/* Hover - but NOT for match tokens (they use pair colors) */
.pz-token:hover:not(.selected):not(.is-selected):not(.correct):not(.is-correct):not(.wrong):not(.is-wrong) {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(100, 180, 255, 0.4);
  box-shadow: 0 0 12px rgba(100, 180, 255, 0.25),
              0 4px 12px rgba(0, 0, 0, 0.35);
  transform: translateY(-2px);
}

/* CRITICAL: Completely disable hover styling for match puzzle */
.pz--kind-match .pz-token:hover:not(.selected):not(.is-selected) {
  background: transparent !important;
  border-color: rgba(255, 220, 100, 0.6) !important; /* Yellow border only */
  box-shadow: 0 0 8px rgba(255, 220, 100, 0.3) !important;
  transform: none !important;
}

.pz--kind-match .pz-token.selected,
.pz--kind-match .pz-token.is-selected {
  /* Don't override - let JS set the pair color */
  background: inherit !important;
  border-color: inherit !important;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.2) !important;
}

/* Selected token state - for non-match puzzles */
.pz:not(.pz--kind-match) .pz-token.selected,
.pz:not(.pz--kind-match) .pz-token.is-selected {
  background: rgba(100, 180, 255, 0.25) !important;
  border-color: rgba(100, 180, 255, 0.6) !important;
  box-shadow: 0 0 16px rgba(100, 180, 255, 0.4),
              0 4px 16px rgba(0, 0, 0, 0.4) !important;
  color: rgba(255, 255, 255, 0.98);
}

/* Correct answer state */
.pz-token.correct,
.pz-token.is-correct {
  background: rgba(80, 200, 120, 0.25) !important;
  border-color: rgba(80, 200, 120, 0.6) !important;
  box-shadow: 0 0 12px rgba(80, 200, 120, 0.4) !important;
}

/* Wrong answer state */
.pz-token.wrong,
.pz-token.is-wrong {
  background: rgba(255, 80, 80, 0.25) !important;
  border-color: rgba(255, 80, 80, 0.6) !important;
  box-shadow: 0 0 12px rgba(255, 80, 80, 0.4) !important;
}

/* Hint state */
.pz-token.hint,
.pz-token.is-hint {
  background: rgba(255, 200, 100, 0.2) !important;
  border-color: rgba(255, 200, 100, 0.5) !important;
  animation: pulse-hint 1.5s ease-in-out infinite;
}

@keyframes pulse-hint {
  0%, 100% {
    box-shadow: 0 0 8px rgba(255, 200, 100, 0.3);
  }
  50% {
    box-shadow: 0 0 16px rgba(255, 200, 100, 0.5);
  }
}

/* ========================================================================== */
/* BUTTONS - Yellowish on hover                                              */
/* ========================================================================== */

button,
.btn,
.pz-btn,
.pz-footer button {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(200, 220, 240, 0.3);
  color: rgba(240, 245, 250, 0.95);
  padding: 0.6em 1.4em;
  border-radius: 6px;
  font-weight: 600;
  transition: all 0.25s ease;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
}

button:hover,
.btn:hover,
.pz-btn:hover,
.pz-footer button:hover {
  background: rgba(255, 220, 100, 0.25) !important;
  border-color: rgba(255, 220, 100, 0.5) !important;
  box-shadow: 0 0 16px rgba(255, 220, 100, 0.35),
              0 4px 12px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
  color: rgba(255, 255, 255, 0.98);
}

button:active,
.btn:active,
.pz-btn:active {
  transform: translateY(0);
  box-shadow: 0 0 8px rgba(255, 220, 100, 0.25),
              0 2px 6px rgba(0, 0, 0, 0.3);
}

/* ========================================================================== */
/* PUZZLE OVERLAY                                                            */
/* ========================================================================== */

.pz-overlay {
  background: rgba(5, 10, 20, 0.92);
  backdrop-filter: blur(16px);
}

.pz-window {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(100, 150, 200, 0.35);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6),
              0 0 24px rgba(100, 180, 255, 0.15);
}

/* Puzzle title styling */
.pz-title {
  color: rgba(240, 245, 250, 0.98);
  text-shadow: 0 0 8px rgba(100, 180, 255, 0.3);
}

/* Puzzle prompt styling */
.pz-prompt {
  color: rgba(220, 230, 240, 0.9);
}

/* ========================================================================== */
/* INPUT FIELDS                                                              */
/* ========================================================================== */

input[type="text"],
input[type="password"],
textarea,
.pz-input {
  background: rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px);
  border: 1px solid rgba(200, 220, 240, 0.25) !important;
  color: rgba(240, 245, 250, 0.95) !important;
  padding: 0.7em 1em;
  border-radius: 6px;
  transition: all 0.25s ease;
}

input[type="text"]:focus,
input[type="password"]:focus,
textarea:focus,
.pz-input:focus {
  background: rgba(255, 255, 255, 0.12) !important;
  border-color: rgba(100, 180, 255, 0.5) !important;
  box-shadow: 0 0 12px rgba(100, 180, 255, 0.3);
  outline: none;
}

input::placeholder,
textarea::placeholder {
  color: rgba(200, 210, 220, 0.5);
}

/* ========================================================================== */
/* INVENTORY & ITEMS                                                         */
/* ========================================================================== */

.inventory {
  background: rgba(10, 15, 25, 0.85);
  backdrop-filter: blur(12px);
  border-top: 1px solid rgba(100, 150, 200, 0.25);
}

.item {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(200, 220, 240, 0.25);
  transition: all 0.25s ease;
}

.item:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(100, 180, 255, 0.4);
  box-shadow: 0 0 12px rgba(100, 180, 255, 0.25);
  transform: translateY(-2px);
}

/* ========================================================================== */
/* DIALOG SYSTEM                                                             */
/* ========================================================================== */

.dlg-overlay {
  background: rgba(5, 10, 20, 0.88);
  backdrop-filter: blur(16px);

  /* Dialog choice color variables - green hover to match OK button */
  --dlg-choice-bg: rgba(255, 255, 255, 0.10);
  --dlg-choice-border: rgba(200, 220, 240, 0.30);
  --dlg-choice-text: rgba(240, 245, 250, 0.95);
  --dlg-choice-hover-bg: rgba(80, 200, 120, 0.25);
  --dlg-choice-hover-border: rgba(80, 200, 120, 0.65);
  --dlg-choice-selected-bg: rgba(80, 200, 120, 0.30);
  --dlg-choice-selected-border: rgba(80, 200, 120, 0.75);
}

.dlg-panel {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(100, 150, 200, 0.35);
  box-shadow: 0 -8px 30px rgba(0, 0, 0, 0.5);
}

.dlg-nameplate {
  background: rgba(15, 20, 35, 0.95);
  border: 1px solid rgba(100, 150, 200, 0.35);
  color: rgba(240, 245, 250, 0.98);
}

.dlg-text {
  color: rgba(230, 240, 250, 0.95);
  line-height: 1.5;
}

/* Dialog choices - ensure hover works with higher specificity */
.dlg-overlay .dlg-choice {
  background: var(--dlg-choice-bg);
  backdrop-filter: blur(8px);
  border: 1px solid var(--dlg-choice-border);
  color: var(--dlg-choice-text);
  transition: all 0.25s ease;
  pointer-events: auto;
  cursor: pointer;
}

/* CRITICAL: Hover must have high specificity and use !important to override */
.dlg-overlay .dlg-choice:hover:not([disabled]),
.dlg-overlay .dlg-choice:focus-visible:not([disabled]) {
  background: var(--dlg-choice-hover-bg) !important;
  border-color: var(--dlg-choice-hover-border) !important;
  box-shadow: 0 0 16px rgba(80, 200, 120, 0.35),
              0 4px 12px rgba(0, 0, 0, 0.3) !important;
  transform: translateY(-2px);
  outline: none;
}

/* Selected/confirmed state */
.dlg-overlay .dlg-choice.dlg-choice--selected {
  background: var(--dlg-choice-selected-bg) !important;
  border-color: var(--dlg-choice-selected-border) !important;
  box-shadow: 0 0 20px rgba(80, 200, 120, 0.45) !important;
  animation: token-pulse-correct 0.35s ease;
}

/* Disabled state */
.dlg-overlay .dlg-choice[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

/* ========================================================================== */
/* NOTIFICATIONS & TOASTS                                                    */
/* ========================================================================== */

.toast {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(100, 150, 200, 0.35);
  color: rgba(240, 245, 250, 0.95);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5),
              0 0 16px rgba(100, 180, 255, 0.2);
}

/* ========================================================================== */
/* LIST PUZZLE SUMMARY SCREEN                                                */
/* ========================================================================== */

.pz-list-summary {
  color: rgba(240, 245, 250, 0.95);
}

.pz-list-item {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(200, 220, 240, 0.25);
}

.pz-list-item.correct {
  background: rgba(80, 200, 120, 0.15);
  border-color: rgba(80, 200, 120, 0.4);
}

.pz-list-item.wrong {
  background: rgba(255, 80, 80, 0.15);
  border-color: rgba(255, 80, 80, 0.4);
}

/* ========================================================================== */
/* MODAL & INSPECTOR                                                         */
/* ========================================================================== */

.modal-overlay {
  background: rgba(5, 10, 20, 0.88);
  backdrop-filter: blur(16px);
}

.modal-content {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(100, 150, 200, 0.35);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  color: rgba(240, 245, 250, 0.95);
}

/* ========================================================================== */
/* HOTSPOTS & SCENE INTERACTION                                              */
/* ========================================================================== */

.hotspot {
  transition: all 0.25s ease;
  background: transparent !important;
  backdrop-filter: none !important;
}

.hotspot:hover {
  background: rgba(100, 180, 255, 0.12) !important;
  box-shadow: 0 0 16px rgba(100, 180, 255, 0.3) inset;
  backdrop-filter: none !important;
}

/* ========================================================================== */
/* RESPONSIVE ADJUSTMENTS                                                    */
/* ========================================================================== */

@media (max-width: 768px) {
  .topbar .title {
    font-size: 1.2em;
  }

  #sceneContainer .scene-title {
    font-size: 1.1em;
  }

  .pz-title {
    font-size: 1.1em;
  }
}
