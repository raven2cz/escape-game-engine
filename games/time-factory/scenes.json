{
  "meta": {
    "id": "time-factory",
    "name": "Továrna času",
    "description": "Fyzikální únikovka o práci a výkonu.",
    "author": "raven2cz",
    "version": "1.0.0",
    "tags": [
      "physics",
      "work",
      "power"
    ],
    "languages": [
      "cs"
    ]
  },
  "settings": {
    "hints": {
      "acceptNeed": true
    },
    "accessibility": {
      "useGuard": "hide"
    }
  },
  "items": [
    {
      "id": "screw",
      "label": "Šroubek",
      "icon": "assets/screw.jpg",
      "meta": {
        "description": "Samořezný šroubek s průměrem 8mm"
      }
    },
    {
      "id": "bolt-and-nut",
      "label": "Šroub s matičkou",
      "icon": "assets/bolt-and-nut.jpg",
      "meta": {
        "description": "Šroub o průměru 10 mm s maticí"
      }
    },
    {
      "id": "washer",
      "label": "Podložka",
      "icon": "assets/washer.jpg",
      "meta": {
        "description": "Pružinová podložka 10 mm"
      }
    },
    {
      "id": "spring",
      "label": "Pružina",
      "icon": "assets/spring.jpg",
      "meta": {
        "description": "Kovová pružina"
      }
    },
    {
      "id": "bearing",
      "label": "Ložisko",
      "icon": "assets/bearing.jpg",
      "meta": {
        "description": "Kuličkové ložisko"
      }
    },
    {
      "id": "gear",
      "label": "Ozubené kolečko",
      "icon": "assets/gear.jpg",
      "meta": {
        "description": "Ozubené kolečko"
      }
    }
  ],
  "scenes": [
    {
      "id": "intro",
      "title": "Vítej v Továrně času! Potřebujeme Tvoji pomoc.",
      "image": "assets/intro.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "main-room",
          "rect": {"x": 13.07, "y": 11.35, "w": 34.66, "h": 78.15}
        }
      ]
    },
    {
      "id": "main-room",
      "title": "Získej 6 předmětů pro opravu továrny.",
      "image": "assets/main-room.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "clock",
          "rect": {"x":43.81,"y":32.4,"w":21.94,"h":40.32}
        },
        {
          "type": "goTo",
          "target": "book-1",
          "rect": {"x":46.1,"y":76.79,"w":14.86,"h":11.18}
        },
        {
          "type": "puzzle",
          "rect": {"x":72.11,"y":43.19,"w":10.46,"h":29.18},
          "puzzleRef": "puzzle-robot-1",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "giveItem": "bolt-and-nut"
          }
        },
        {
          "type": "puzzle",
          "rect": {"x":84.41,"y":50.45,"w":8.45,"h":29.64},
          "puzzleRef": "puzzle-robot-2",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "message": "Získal jsi podložku! \uD83C\uDF89",
            "giveItem": "washer",
            "goTo": "robot-2-after-1"
          }
        },
        {
          "type": "puzzle",
          "rect": {"x":5.84,"y":70.3,"w":22.87,"h":21.39},
          "puzzleRef": "puzzle-hammer",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "message": "Získal jsi ložisko! \uD83C\uDF89",
            "giveItem": "bearing"
          }
        },
        {
          "type": "puzzle",
          "rect": {"x":20.21,"y":11.7,"w":20.51,"h":35.25},
          "puzzleRef": "puzzle-shelf",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "giveItem": "gear"
          }
        },
        {
          "type": "goTo",
          "target": "exit",
          "requireItems": [
            "screw",
            "bolt-and-nut",
            "washer",
            "spring",
            "bearing",
            "gear"
          ],
          "rect": {"x":73.34,"y":1.06,"w":25.02,"h":17.59}
        }
      ]
    },
    {
      "id": "robot-2-after-1",
      "title": "Práce a jednoduché stroje",
      "image": "assets/robot-2-after-1.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "robot-2-after-2",
          "rect": {"x":72.32,"y":79.61,"w":25.64,"h":19.74}
        }
      ]
    },
    {
      "id": "robot-2-after-2",
      "title": "Zlaté pravidlo mechaniky",
      "image": "assets/robot-2-after-2.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "main-room",
          "rect": {"x":86.87,"y":78.25,"w":10.83,"h":18.74}
        }
      ]
    },
    {
      "id": "clock",
      "title": "Kdy se koná práce?",
      "image": "assets/clock.jpg",
      "hotspots": [
        {
          "type": "puzzle",
          "rect": {"x":72.15,"y":80.94,"w":25.83,"h":18.39},
          "puzzleRef": "puzzle-clock",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "message": "Správně! Získal jsi šroubek. \uD83C\uDF89",
            "giveItem": "screw",
            "goTo": "main-room"
          }
        },
        {
          "type": "goTo",
          "target": "main-room",
          "rect": {"x":3.45,"y":79.56,"w":9.49,"h":17.78}
        }
      ]
    },
    {
      "id": "book-1",
      "title": "Přečti si, co je výkon.",
      "image": "assets/book-1.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "book-2",
          "rect": {"x":69.17,"y":79.82,"w":25.66,"h":17.71}
        },
        {
          "type": "goTo",
          "target": "main-room",
          "rect": {"x":3.93,"y":79.18,"w":10.12,"h":17.77}
        }
      ]
    },
    {
      "id": "book-2",
      "title": "Výpočet výkonu",
      "image": "assets/book-2.jpg",
      "hotspots": [
        {
          "type": "puzzle",
          "rect": {"x":69.01,"y":80.07,"w":25.74,"h":16.99},
          "puzzleRef": "puzzle-book",
          "options": {
            "blockUntilSolved": true
          },
          "onSuccess": {
            "message": "Získal jsi pružinu! \uD83C\uDF89",
            "giveItem": "spring",
            "goTo": "book-puzzles-after-1"
          }
        }
      ]
    },
    {
      "id": "book-puzzles-after-1",
      "title": "Rychlost rozhoduje!",
      "image": "assets/book-puzzles-after-1.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "book-puzzles-after-2",
          "rect": {"x": 70, "y": 82, "w": 28, "h": 18}
        }
      ]
    },
    {
      "id": "book-puzzles-after-2",
      "title": "Koňská síla",
      "image": "assets/book-puzzles-after-2.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "main-room",
          "rect": {"x":87.09,"y":78.25,"w":10.31,"h":18.38}
        }
      ]
    },
    {
      "id": "exit",
      "title": "Dokázal jsi to! TOVÁRNA ČASU V PROVOZU!",
      "image": "assets/exit.jpg",
      "end": true,
      "hotspots": []
    }
  ],
  "events": [
    {
      "id": "toast-screw",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["screw"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi šroubek! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "toast-bolt-and-nut",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["bolt-and-nut"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi šroub s matičkou! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "toast-washer",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["washer"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi podložku! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "toast-spring",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["spring"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi pružinu! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "toast-bearing",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["bearing"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi ložisko! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "toast-gear",
      "once": true,
      "when": {
        "on": "stateChange",
        "requireItems": ["gear"]
      },
      "then": {
        "toast": {
          "text": "Získal jsi ozubené kolečko! \uD83C\uDF89",
          "ms": 3000
        }
      }
    },
    {
      "id": "hint-exit-available",
      "once": true,
      "when": {
        "on": "enterScene",
        "scene": "main-room",
        "requireItems": [
          "screw",
          "bolt-and-nut",
          "washer",
          "spring",
          "bearing",
          "gear"
        ]
      },
      "then": {
        "toast": {
          "text": "Máš všech 6 součástek! Východ je nyní otevřen! \uD83C\uDF89",
          "ms": 5000
        },
        "highlightHotspot": {
          "sceneId": "main-room",
          "rect": {"x": 70, "y": 2, "w": 28, "h": 18},
          "ms": 5000
        }
      }
    },
    {
      "id": "hint-pick-screw",
      "once": false,
      "when": {
        "on": "enterScene",
        "scene": "clock",
        "missingItems": [
          "screw"
        ]
      },
      "then": {
        "toast": {
          "text": "Vyřeš puzzle, abys získal šroubek! \uD83D\uDCCB",
          "ms": 4000
        }
      }
    },
    {
      "id": "hint-pick-spring",
      "once": false,
      "when": {
        "on": "enterScene",
        "scene": "book-2",
        "missingItems": [
          "spring"
        ]
      },
      "then": {
        "toast": {
          "text": "Vyřeš puzzle, abys získal pružinu! \uD83D\uDCCB",
          "ms": 4000
        }
      }
    },
    {
      "id": "dlg-intro-mainRoom",
      "once": true,
      "when": {
        "on": "enterScene",
        "scene": "main-room"
      },
      "then": {
        "openDialog": {
          "id": "intro.mainRoom"
        }
      }
    },
    {
      "id": "dlg-exit-victory",
      "once": true,
      "when": {
        "on": "enterScene",
        "scene": "exit"
      },
      "then": {
        "openDialog": {
          "id": "exit.victory"
        }
      }
    }
  ],
  "startScene": "intro"
}
