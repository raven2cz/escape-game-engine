{
  "meta": {
    "id": "leeuwenhoek",
    "name": "@game.name@Úniková hra Mikroskop",
    "description": "@game.description@Mikro-mise v dílně Antonie van Leeuwenhoeka.",
    "author": "raven2cz",
    "version": "1.0.0",
    "tags": ["biology", "microscope", "history"],
    "languages": ["cs", "en"]
  },
  "settings": {
    "hints": {
      "acceptNeed": true
    }
  },
  "items": [
    {
      "id": "indicie-1",
      "label": "@item.ind1.label@Indicie 1",
      "icon": "assets/indicie-1.jpg",
      "meta": {
        "description": "@item.ind1.desc@se vrhnout"
      }
    },
    {
      "id": "indicie-2",
      "label": "@item.ind2.label@Indicie 2",
      "icon": "assets/indicie-2.jpg",
      "meta": {
        "description": "@item.ind2.desc@na mikroskopování"
      }
    },
    {
      "id": "indicie-3",
      "label": "@item.ind3.label@Indicie 3",
      "icon": "assets/indicie-3.jpg",
      "meta": {
        "description": "@item.ind3.desc@pojďme"
      }
    },
    {
      "id": "golden_key",
      "label": "@item.golden.label@Zlatý klíč",
      "icon": "assets/golden_key.jpg",
      "meta": {
        "description": "@item.golden.desc@Klíč k definitivnímu východu."
      }
    }
  ],
  "scenes": [
    {
      "id": "welcome",
      "title": "@scene.welcome.title@Vítej, badateli! Únikovka začíná!",
      "image": "assets/welcome.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "title",
          "rect": { "x": 65.39, "y": 78.41, "w": 23.34, "h": 16.66 }
        }
      ]
    },
    {
      "id": "title",
      "title": "@scene.title.title@Naše mikro-mise",
      "image": "assets/title.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "intro-1",
          "rect": { "x": 59.75, "y": 78.64, "w": 26.01, "h": 17.9 }
        }
      ]
    },
    {
      "id": "intro-1",
      "title": "@scene.intro1.title@Přečti si text",
      "image": "assets/intro-1.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "intro-2",
          "rect": { "x": 70.94, "y": 79.34, "w": 25.62, "h": 16.97 }
        }
      ]
    },
    {
      "id": "intro-2",
      "title": "@scene.intro2.title@Přečti si text",
      "image": "assets/intro-2.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "main-room",
          "rect": { "x": 70.77, "y": 81.84, "w": 25.7, "h": 16.57 }
        }
      ]
    },
    {
      "id": "main-room",
      "title": "@scene.main.title@Nacházíš se v hlavní místnosti",
      "image": "assets/main-room.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "casti-mikroskopu",
          "rect": { "x": 24.03, "y": 23.78, "w": 11.28, "h": 43.89 }
        },
        {
          "type": "goTo",
          "target": "trepka-velka",
          "rect": { "x": 36.75, "y": 62.07, "w": 17.84, "h": 18.05 }
        },
        {
          "type": "goTo",
          "target": "question-1",
          "rect": { "x": 11.27, "y": 77.32, "w": 13.37, "h": 11.91 }
        },
        {
          "type": "goTo",
          "target": "treasure-room",
          "requireItems": ["indicie-1","indicie-2","indicie-3"],
          "rect": { "x": 64.43, "y": 7.44, "w": 30.82, "h": 73.31 }
        }
      ]
    },
    {
      "id": "casti-mikroskopu",
      "title": "@scene.parts.title@Prohlédni si části mikroskopu",
      "image": "assets/casti-mikroskopu.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "found-indicie-1",
          "rect": { "x": 70.12, "y": 82.93, "w": 25.37, "h": 15.31 }
        }
      ]
    },
    {
      "id": "found-indicie-1",
      "title": "@scene.found1.title@Našel jsi první indicii, zapamatuj si ji!",
      "image": "assets/found-indicie-1.jpg",
      "hotspots": [
        {
          "type": "pickup",
          "itemId": "indicie-1",
          "rect": { "x": 70.43, "y": 28.85, "w": 20.56, "h": 27.66 }
        },
        {
          "type": "goTo",
          "target": "main-room",
          "requireItems": ["indicie-1"],
          "rect": { "x": 89.78, "y": 83.07, "w": 7.17, "h": 13.43 }
        }
      ]
    },
    {
      "id": "trepka-velka",
      "title": "@scene.paramecium.title@Najdi vzorek trepky velké.",
      "image": "assets/trepka-velka.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "lidska-krev",
          "rect": { "x": 8.01, "y": 54.9, "w": 25.33, "h": 45.1 }
        }
      ]
    },
    {
      "id": "lidska-krev",
      "title": "@scene.blood.title@Najdi vzorek lidské krve.",
      "image": "assets/lidska-krev.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "bakterie",
          "rect": { "x": 42.9, "y": 7.51, "w": 26.71, "h": 47.69 }
        }
      ]
    },
    {
      "id": "bakterie",
      "title": "@scene.bacteria.title@Najdi vzorek bakterií.",
      "image": "assets/bakterie.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "sul",
          "rect": { "x": 74.37, "y": 57.13, "w": 25.58, "h": 42.87 }
        }
      ]
    },
    {
      "id": "sul",
      "title": "@scene.salt.title@Najdi vzorek soli.",
      "image": "assets/sul.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "chloroplasty",
          "rect": { "x": 2.69, "y": 9.05, "w": 24.33, "h": 46.31 }
        }
      ]
    },
    {
      "id": "chloroplasty",
      "title": "@scene.chloroplasts.title@Najdi vzorek chloroplastů.",
      "image": "assets/chloroplasty.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "kridlo-mouchy",
          "rect": { "x": 40.87, "y": 55.67, "w": 25.58, "h": 44.33 }
        }
      ]
    },
    {
      "id": "kridlo-mouchy",
      "title": "@scene.flywing.title@Najdi vzorek křídla mouchy.",
      "image": "assets/kridlo-mouchy.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "found-indicie-2",
          "rect": { "x": 71.34, "y": 6.74, "w": 24.63, "h": 46.77 }
        }
      ]
    },
    {
      "id": "found-indicie-2",
      "title": "@scene.found2.title@Našel jsi druhou indicii, zapamatuj si ji!",
      "image": "assets/found-indicie-2.jpg",
      "hotspots": [
        {
          "type": "pickup",
          "itemId": "indicie-2",
          "rect": { "x": 3.12, "y": 35.94, "w": 32.38, "h": 44 }
        },
        {
          "type": "goTo",
          "target": "main-room",
          "requireItems": ["indicie-2"],
          "rect": { "x": 89.82, "y": 82.94, "w": 6.97, "h": 14.1 }
        }
      ]
    },
    {
      "id": "question-1",
      "title": "@scene.q1.title@Kdo napsal tento dopis?",
      "image": "assets/question-1.jpg",
      "hotspots": [
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 78.39, "y": 47.27, "w": 4.07, "h": 7.32 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 73.37, "y": 58.59, "w": 3.81, "h": 7.09 } },
        { "type": "goTo", "target": "question-2", "rect": { "x": 79.82, "y": 68.53, "w": 4.07, "h": 6.86 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 73.37, "y": 79.78, "w": 3.81, "h": 6.94 } }
      ]
    },
    {
      "id": "wrong-answer",
      "title": "@scene.wrong.title@Špatná odpověď, zkus to znova!",
      "image": "assets/wrong-answer.jpg",
      "hotspots": [
        {
          "type": "goTo",
          "target": "main-room",
          "rect": { "x": 21.3, "y": 39.25, "w": 11.69, "h": 21.42 }
        }
      ]
    },
    {
      "id": "question-2",
      "title": "@scene.q2.title@Přiblížení objektivu.",
      "image": "assets/question-2.jpg",
      "hotspots": [
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 70.73, "y": 29.78, "w": 3.77, "h": 6.47 } },
        { "type": "goTo", "target": "question-3", "rect": { "x": 70.73, "y": 42.8, "w": 3.73, "h": 7.09 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 70.73, "y": 61.06, "w": 3.86, "h": 7.17 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 70.73, "y": 73.16, "w": 3.73, "h": 7.24 } }
      ]
    },
    {
      "id": "question-3",
      "title": "@scene.q3.title@Kolikrát se předmět zvětší?",
      "image": "assets/question-3.jpg",
      "hotspots": [
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 38.66, "y": 29.01, "w": 3.64, "h": 6.7 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 46.23, "y": 39.56, "w": 3.64, "h": 6.71 } },
        { "type": "goTo", "target": "found-indicie-3", "rect": { "x": 40.56, "y": 50.73, "w": 3.81, "h": 6.71 } },
        { "type": "goTo", "target": "wrong-answer", "rect": { "x": 47.01, "y": 59.75, "w": 3.68, "h": 6.78 } }
      ]
    },
    {
      "id": "found-indicie-3",
      "title": "@scene.found3.title@Našel jsi třetí indicii, zapamatuj si ji!",
      "image": "assets/found-indicie-3.jpg",
      "hotspots": [
        {
          "type": "pickup",
          "itemId": "indicie-3",
          "rect": { "x": 71.64, "y": 26, "w": 17.32, "h": 23.66 }
        },
        {
          "type": "goTo",
          "target": "main-room",
          "requireItems": ["indicie-3"],
          "rect": { "x": 89.74, "y": 82.94, "w": 7.22, "h": 12.87 }
        }
      ]
    },
    {
      "id": "treasure-room",
      "title": "@scene.treasure.title@Nacházíš se v místnosti s pokladem!",
      "image": "assets/treasure-room.jpg",
      "hotspots": [
        {
          "type": "puzzle",
          "rect": { "x": 11.69, "y": 46.8, "w": 43.07, "h": 50.17 },
          "requireItems": ["indicie-1","indicie-2","indicie-3"],
          "puzzle": {
            "kind": "phrase",
            "prompt": "@puzzle.chest.prompt@Slož z indicií větu a napiš ji:",
            "solution": "pojďme se vrhnout na mikroskopování",
            "title": "@puzzle.chest.title@Truhla"
          },
          "onSuccess": {
            "message": "@puzzle.chest.opened@Víko truhly povolilo, získáš předmět zlatý klíč.",
            "giveItem": "golden_key",
            "setFlags": ["chest_opened"]
          }
        },
        {
          "type": "goTo",
          "target": "exit",
          "rect": { "x": 69.35, "y": 0.73, "w": 23.63, "h": 80.36 },
          "acceptItems": [
            { "id": "golden_key", "consume": false }
          ],
          "showNeedHint": true,
          "onApply": {
            "message": "@door.exit.unlocked@Dveře se odemkly.",
            "goTo": "exit"
          }
        }
      ]
    },
    {
      "id": "exit",
      "title": "@scene.exit.title@Dokázal jsi to! 🎉🏆",
      "image": "assets/exit.jpg",
      "end": true,
      "hotspots": []
    }
  ],
  "events": [
    {
      "id": "dlg-intro-welcome",
      "once": true,
      "when": { "on": "enterScene", "scene": "welcome" },
      "then": {
        "openDialog": { "id": "intro.welcome" }
      }
    },
    {
      "id": "dlg-intro-mainRoom",
      "once": true,
      "when": { "on": "enterScene", "scene": "main-room" },
      "then": {
        "openDialog": { "id": "intro.mainRoom" }
      }
    },
    {
      "id": "hint-treasure-available",
      "once": true,
      "when": {
        "on": "enterScene",
        "scene": "main-room",
        "requireItems": ["indicie-1","indicie-2","indicie-3"]
      },
      "then": {
        "toast": {
          "text": "@event.treasure.ready@🔓 Dveře do pokladnice jsou nyní otevřeny! Máš všechny indicie.",
          "ms": 5000
        },
        "highlightHotspot": {
          "sceneId": "main-room",
          "rect": { "x": 59.95, "y": 4.55, "w": 37.61, "h": 74.59 },
          "ms": 5000
        }
      }
    },
    {
      "id": "treasure-opened-visual",
      "once": true,
      "when": { "on": "stateChange", "requireFlags": ["chest_opened"] },
      "then": {
        "setSceneImage": { "sceneId": "treasure-room", "image": "assets/treasure-room-opened.jpg" },
        "toast": {
          "text": "@event.chest.opened@🗝️ Truhla je otevřená! Získal jsi zlatý klíč.",
          "ms": 5000
        },
        "highlightHotspot": {
          "sceneId": "treasure-room",
          "rect": { "x": 69.35, "y": 0.73, "w": 23.63, "h": 80.36 },
          "ms": 5000
        }
      }
    },
    {
      "id": "hint-pick-indicie-1",
      "once": false,
      "when": { "on": "enterScene", "scene": "found-indicie-1", "missingItems": ["indicie-1"] },
      "then": {
        "toast": { "text": "@event.pick.ind1@👉 Klepni na indicii a seber ji.", "ms": 4000 },
        "highlightHotspot": {
          "sceneId": "found-indicie-1",
          "rect": { "x": 68.87, "y": 26.06, "w": 23.25, "h": 32.71 },
          "ms": 6000
        }
      }
    },
    {
      "id": "hint-pick-indicie-2",
      "once": false,
      "when": { "on": "enterScene", "scene": "found-indicie-2", "missingItems": ["indicie-2"] },
      "then": {
        "toast": { "text": "@event.pick.ind2@👉 Klepni na indicii a seber ji.", "ms": 4000 },
        "highlightHotspot": {
          "sceneId": "found-indicie-2",
          "rect": { "x": 1.48, "y": 32.33, "w": 35.87, "h": 51.3 },
          "ms": 4000
        }
      }
    },
    {
      "id": "hint-pick-indicie-3",
      "once": false,
      "when": { "on": "enterScene", "scene": "found-indicie-3", "missingItems": ["indicie-3"] },
      "then": {
        "toast": { "text": "@event.pick.ind3@👉 Klepni na indicii a seber ji.", "ms": 4000 },
        "highlightHotspot": {
          "sceneId": "found-indicie-3",
          "rect": { "x": 70.08, "y": 22.77, "w": 20.69, "h": 30.68 },
          "ms": 6000
        }
      }
    }
  ],
  "startScene": "welcome"
}
